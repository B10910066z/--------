<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #formTable{
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            width: 100%;
        }
        .item{
            background-color: #ADD8E6;
            width: fit-content;  /*fitcontent意思是用來剛好符合內容物大學*/
            padding: 10px;
        }
    </style>
</head>

<body>
    <div class="container">
        <input type="text" id="enterSearch">
        <button class="search">查詢</button>
        <input type="text" id="enterFilter">
        <button class="typeFilter">類型篩選</button>
        <h3>請輸入範圍</h3>
        <input type="text" id="enterNumScope1">
        <h2>~</h2>
        <input type="text" id="enterNumScope2">
        <button class="scopeFilter">價格範圍搜尋</button>
        <div id="formTable"></div>
    </div>
    <!-- <div class="container">
        <table class="form"></table>
    </div> -->

    <script type="module">
        import { product } from "../domPractice/product.js";
        let search = document.querySelector(".search");
        var num = 0;
        search.addEventListener("click", function (event) {
            let enterSearch = document.querySelector("#enterSearch");
            let formTable = document.querySelector("#formTable");
            formTable.innerHTML = "";
            num = 0;
            product.forEach(element => {
                if (element.ProductNumber == enterSearch.value) {
                    num++;
                    let item = document.createElement('div');
                    item.setAttribute('class', 'item');
                    let itemText = "";
                    itemText += `<img src="https://picsum.photos/300/200/?random=10">`;
                    itemText += `<h2>商品編號:${element.ProductNumber}</h2>`;
                    itemText += `<h2>商品名稱:${element.ProductName}</h2>`;
                    if (element.Amount == 0){
                        itemText += `<h2>商品數量:${element.Amount} (已售完)</h2>`;
                    }
                    else{
                        itemText += `<h2>商品數量:${element.Amount}</h2>`;
                    }        
                    itemText += `<h2>商品價格:${element.Price}</h2>`;
                    itemText += `<h2>商品類型:${element.ProductType}</h2>`;
                    item.innerHTML = itemText;
                    formTable.append(item);
                }
            })
            foolProof(num);
        })

        let typeFilter = document.querySelector(".typeFilter");
        typeFilter.addEventListener("click", function (event) {
            let enterFilter = document.querySelector("#enterFilter");
            let formTable = document.querySelector("#formTable");
            formTable.innerHTML = "";
            num = 0;
            product.forEach(element => {
                if (element.ProductType == enterFilter.value) {
                    num++;
                    let item = document.createElement('div');
                    item.setAttribute('class', 'item');
                    let itemText = "";
                    itemText += `<img src="https://picsum.photos/300/200/?random=10">`;
                    itemText += `<h2>商品編號:${element.ProductNumber}</h2>`;
                    itemText += `<h2>商品名稱:${element.ProductName}</h2>`;
                    if (element.Amount == 0){
                        itemText += `<h2>商品數量:${element.Amount} (已售完)</h2>`;
                    }
                    else{
                        itemText += `<h2>商品數量:${element.Amount}</h2>`;
                    }
                    itemText += `<h2>商品價格:${element.Price}</h2>`;
                    itemText += `<h2>商品類型:${element.ProductType}</h2>`;
                    item.innerHTML = itemText;
                    formTable.append(item);
                }
            })
            foolProof(num);
        })

        let scopeFilter = document.querySelector(".scopeFilter");
        scopeFilter.addEventListener("click", function (event) {
            let enterNumScope1 = document.querySelector("#enterNumScope1");
            let enterNumScope2 = document.querySelector("#enterNumScope2");
            let formTable = document.querySelector("#formTable");
            formTable.innerHTML = "";
            num = 0;
            product.forEach(element => {
                if (element.Price >= enterNumScope1.value && element.Price <= enterNumScope2.value) {
                    num++;
                    let item = document.createElement('div');
                    item.setAttribute('class', 'item');
                    let itemText = "";
                    itemText += `<img src="https://picsum.photos/300/200/?random=10">`;
                    itemText += `<h2>商品編號:${element.ProductNumber}</h2>`;
                    itemText += `<h2>商品名稱:${element.ProductName}</h2>`;
                    if (element.Amount == 0){
                        itemText += `<h2>商品數量:${element.Amount} (已售完)</h2>`;
                    }
                    else{
                        itemText += `<h2>商品數量:${element.Amount}</h2>`;
                    }
                    itemText += `<h2>商品價格:${element.Price}</h2>`;
                    itemText += `<h2>商品類型:${element.ProductType}</h2>`;
                    item.innerHTML = itemText;
                    formTable.append(item);
                }
            })
            foolProof(num);
        })
        function foolProof(numberNum) {
            if (numberNum == 0) {
                alert("查無結果!請重新輸入");
            }
        }
    </script>
</body>

</html>